"use strict";(self.webpackChunkskote=self.webpackChunkskote||[]).push([[303],{8303:(se,v,c)=>{c.r(v),c.d(v,{ManagementModule:()=>te});var m=c(177),j=c(803),o=c(9417),u=c(6554),E=c(8032),p=c.n(E),h=c(2510),e=c(4438),b=c(1626),g=c(7695),F=c(7114),k=c(5794);const _=["editprojectAssignmentTemplate"],y=(n,a)=>({completed:n,pending:a}),N=n=>({disabled:n});function C(n,a){1&n&&(e.j41(0,"div",8),e.EFF(1," employeeFirstName is required. "),e.k0s())}function D(n,a){1&n&&(e.j41(0,"div",8),e.EFF(1," SelectedEmployeeName is required. "),e.k0s())}function A(n,a){1&n&&(e.j41(0,"div",8),e.EFF(1," projectName is required. "),e.k0s())}function T(n,a){1&n&&(e.j41(0,"div",8),e.EFF(1," projectStartDate is required. "),e.k0s())}function I(n,a){1&n&&(e.j41(0,"div",8),e.EFF(1," projectEndDate is required. "),e.k0s())}function P(n,a){if(1&n){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.nI1(11,"date"),e.k0s(),e.j41(12,"td"),e.EFF(13),e.nI1(14,"date"),e.k0s(),e.j41(15,"td")(16,"span",20),e.EFF(17),e.k0s()(),e.j41(18,"td",21)(19,"i",22),e.bIt("click",function(){const s=e.eBV(t).$implicit,r=e.XpG();return e.Njj(r.editprojectAssignment(s))}),e.k0s()()()}if(2&n){const t=a.$implicit;e.R7$(2),e.JRh(t.assignmentUniqueId),e.R7$(2),e.JRh(t.employeeID),e.R7$(2),e.JRh(t.employeeName),e.R7$(2),e.JRh(t.projectName),e.R7$(2),e.JRh(e.i5U(11,9,t.projectStartDate,"yyyy-MM-dd")),e.R7$(3),e.JRh(e.i5U(14,12,t.projectEndDate,"yyyy-MM-dd")),e.R7$(3),e.Y8G("ngClass",e.l_i(15,y,"completed"===t.status,"pending"===t.status)),e.R7$(),e.SpI(" ",t.status," "),e.R7$(2),e.Y8G("ngClass",e.eq3(18,N,"completed"===t.status))}}function S(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",23)(1,"h5",24),e.EFF(2,"Edit Project Assignment"),e.k0s(),e.j41(3,"button",25),e.bIt("click",function(){const s=e.eBV(t).close;return e.Njj(s("Close click"))}),e.j41(4,"span",26),e.EFF(5,"\xd7"),e.k0s()()(),e.j41(6,"div",27)(7,"form",4)(8,"div",5)(9,"div",6)(10,"div",7)(11,"label"),e.EFF(12,"Employee Id"),e.j41(13,"span",8),e.EFF(14,"*"),e.k0s()(),e.nrm(15,"input",28),e.k0s()(),e.j41(16,"div",6)(17,"div",7)(18,"label"),e.EFF(19,"Employee Name"),e.j41(20,"span",8),e.EFF(21,"*"),e.k0s()(),e.nrm(22,"input",29),e.k0s()(),e.j41(23,"div",6)(24,"div",7)(25,"label"),e.EFF(26,"Project Name"),e.j41(27,"span",8),e.EFF(28,"*"),e.k0s()(),e.nrm(29,"ng-select",30),e.k0s()(),e.j41(30,"div",6)(31,"div",7)(32,"label"),e.EFF(33,"Project Start Date"),e.j41(34,"span",8),e.EFF(35,"*"),e.k0s()(),e.nrm(36,"input",13),e.k0s()(),e.j41(37,"div",6)(38,"div",7)(39,"label"),e.EFF(40,"Project End Date"),e.j41(41,"span",8),e.EFF(42,"*"),e.k0s()(),e.nrm(43,"input",14),e.k0s()(),e.j41(44,"div",6)(45,"div",7)(46,"label"),e.EFF(47,"Status"),e.j41(48,"span",8),e.EFF(49,"*"),e.k0s()(),e.j41(50,"select",31)(51,"option",32),e.EFF(52,"Completed"),e.k0s(),e.j41(53,"option",33),e.EFF(54,"Pending"),e.k0s()()()()()()(),e.j41(55,"div",34)(56,"button",35),e.bIt("click",function(){const s=e.eBV(t).close;return e.Njj(s("Close click"))}),e.EFF(57,"Close"),e.k0s(),e.j41(58,"button",36),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.UpdateAssignments())}),e.EFF(59,"Update"),e.k0s()()}if(2&n){const t=e.XpG();e.R7$(7),e.Y8G("formGroup",t.editForm),e.R7$(22),e.Y8G("items",t.allProjects)("multiple",!1)("searchable",!0)}}const R=["editProjectTemplate"];function x(n,a){1&n&&(e.j41(0,"div",8),e.EFF(1," projectName is required. "),e.k0s())}function G(n,a){1&n&&(e.j41(0,"div",8),e.EFF(1," costCenter is required. "),e.k0s())}function $(n,a){1&n&&(e.j41(0,"div",8),e.EFF(1," status is required. "),e.k0s())}function B(n,a){if(1&n){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td",18)(10,"i",19),e.bIt("click",function(){const s=e.eBV(t).$implicit,r=e.XpG();return e.Njj(r.editProject(s))}),e.k0s(),e.j41(11,"i",20),e.bIt("click",function(){const s=e.eBV(t).$implicit,r=e.XpG();return e.Njj(r.delete(s))}),e.k0s()()()}if(2&n){const t=a.$implicit;e.R7$(2),e.JRh(t.projectUniqueId),e.R7$(2),e.JRh(t.projectName),e.R7$(2),e.JRh(t.costCenter),e.R7$(2),e.JRh(t.status)}}function U(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",21)(1,"h5",22),e.EFF(2,"Edit Project"),e.k0s(),e.j41(3,"button",23),e.bIt("click",function(){const s=e.eBV(t).close;return e.Njj(s("Close click"))}),e.j41(4,"span",24),e.EFF(5,"\xd7"),e.k0s()()(),e.j41(6,"div",25)(7,"form",4)(8,"div",5)(9,"div",6)(10,"div",7)(11,"label"),e.EFF(12,"Project Name"),e.j41(13,"span",8),e.EFF(14,"*"),e.k0s()(),e.nrm(15,"input",9),e.k0s()(),e.j41(16,"div",6)(17,"div",7)(18,"label"),e.EFF(19,"Cost Center"),e.j41(20,"span",8),e.EFF(21,"*"),e.k0s()(),e.nrm(22,"input",11),e.k0s()(),e.j41(23,"div",6)(24,"div",7)(25,"label"),e.EFF(26,"Status"),e.j41(27,"span",8),e.EFF(28,"*"),e.k0s()(),e.nrm(29,"ng-select",12),e.k0s()()()()(),e.j41(30,"div",26)(31,"button",27),e.bIt("click",function(){const s=e.eBV(t).close;return e.Njj(s("Close click"))}),e.EFF(32,"Close"),e.k0s(),e.j41(33,"button",28),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.updateProject())}),e.EFF(34,"Update"),e.k0s()()}if(2&n){const t=e.XpG();e.R7$(7),e.Y8G("formGroup",t.projectForm),e.R7$(22),e.Y8G("items",t.statusOptions)("multiple",!1)}}const w=["edittaskTemplate"];function Y(n,a){1&n&&(e.j41(0,"div",8),e.EFF(1," employeeID is required. "),e.k0s())}function V(n,a){1&n&&(e.j41(0,"div",8),e.EFF(1," Description is required. "),e.k0s())}function X(n,a){1&n&&(e.j41(0,"div",8),e.EFF(1," Task Date is required. "),e.k0s())}function O(n,a){1&n&&(e.j41(0,"div",8),e.EFF(1," Status is required. "),e.k0s())}function L(n,a){if(1&n){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td")(12,"i",24),e.bIt("click",function(){const s=e.eBV(t).$implicit,r=e.XpG(2);return e.Njj(r.editTask(s,r.editTemplate))}),e.k0s(),e.j41(13,"i",25),e.bIt("click",function(){const s=e.eBV(t).$implicit,r=e.XpG(2);return e.Njj(r.deleteTask(s))}),e.k0s()()()}if(2&n){const t=a.$implicit;e.R7$(2),e.JRh(t.projectName),e.R7$(2),e.JRh(t.employeeID),e.R7$(2),e.JRh(t.description),e.R7$(2),e.JRh(t.TaskDate),e.R7$(2),e.JRh(t.status)}}function J(n,a){if(1&n&&(e.j41(0,"div",21)(1,"table",22)(2,"thead")(3,"tr")(4,"th"),e.EFF(5,"Project Name"),e.k0s(),e.j41(6,"th"),e.EFF(7,"Employee Id"),e.k0s(),e.j41(8,"th"),e.EFF(9,"Description"),e.k0s(),e.j41(10,"th"),e.EFF(11,"Task Date"),e.k0s(),e.j41(12,"th"),e.EFF(13,"Status"),e.k0s(),e.j41(14,"th"),e.EFF(15,"Action"),e.k0s()()(),e.j41(16,"tbody"),e.DNE(17,L,14,5,"tr",23),e.k0s()()()),2&n){const t=e.XpG();e.R7$(17),e.Y8G("ngForOf",t.taskAssignments)}}function K(n,a){1&n&&(e.j41(0,"div",8),e.EFF(1," employeeID is required. "),e.k0s())}function Q(n,a){1&n&&(e.j41(0,"div",8),e.EFF(1," Description is required. "),e.k0s())}function z(n,a){1&n&&(e.j41(0,"div",8),e.EFF(1," Task Date is required. "),e.k0s())}function H(n,a){1&n&&(e.j41(0,"div",8),e.EFF(1," Status is required. "),e.k0s())}function Z(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",26)(1,"h5",27),e.EFF(2,"Edit Task Assignment"),e.k0s(),e.j41(3,"button",28),e.bIt("click",function(){const s=e.eBV(t).$implicit;return e.Njj(s.dismiss("Cross click"))}),e.j41(4,"span",29),e.EFF(5,"\xd7"),e.k0s()()(),e.j41(6,"div",30)(7,"form",4)(8,"div",5)(9,"div",6)(10,"div",7)(11,"label"),e.EFF(12,"Employee ID"),e.j41(13,"span",8),e.EFF(14,"*"),e.k0s()(),e.nrm(15,"input",31),e.DNE(16,K,2,0,"div",10),e.k0s()(),e.j41(17,"div",32)(18,"div",7)(19,"label"),e.EFF(20,"Project Name"),e.j41(21,"span",8),e.EFF(22,"*"),e.k0s()(),e.nrm(23,"input",33),e.k0s()(),e.j41(24,"div",6)(25,"div",7)(26,"label"),e.EFF(27,"Description"),e.j41(28,"span",8),e.EFF(29,"*"),e.k0s()(),e.nrm(30,"input",12),e.DNE(31,Q,2,0,"div",10),e.k0s()(),e.j41(32,"div",6)(33,"div",7)(34,"label"),e.EFF(35,"Task Date"),e.j41(36,"span",8),e.EFF(37,"*"),e.k0s()(),e.nrm(38,"input",13),e.DNE(39,z,2,0,"div",10),e.k0s()(),e.j41(40,"div",6)(41,"div",7)(42,"label"),e.EFF(43,"Status"),e.j41(44,"span",8),e.EFF(45,"*"),e.k0s()(),e.j41(46,"select",14)(47,"option",15),e.EFF(48,"Select Status"),e.k0s(),e.j41(49,"option",16),e.EFF(50,"Open"),e.k0s(),e.j41(51,"option",17),e.EFF(52,"Close"),e.k0s()(),e.DNE(53,H,2,0,"div",10),e.k0s()()()()(),e.j41(54,"div",34)(55,"button",35),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.UpdateAssignments())}),e.EFF(56,"Update"),e.k0s(),e.j41(57,"button",36),e.bIt("click",function(){const s=e.eBV(t).$implicit;return e.Njj(s.dismiss("Close click"))}),e.EFF(58,"Close"),e.k0s()()}if(2&n){const t=e.XpG();e.R7$(7),e.Y8G("formGroup",t.edittaskForm),e.R7$(9),e.Y8G("ngIf",t.submit&&t.f.employeeID.errors),e.R7$(15),e.Y8G("ngIf",t.submit&&t.f.description.errors),e.R7$(8),e.Y8G("ngIf",t.submit&&(null==t.f.TaskDate?null:t.f.TaskDate.errors)),e.R7$(14),e.Y8G("ngIf",t.submit&&t.f.status.errors)}}const W=[{path:"ManagementProjectAssignment",component:(()=>{class n{constructor(t,i,s,r,l,d,f){this.fb=t,this.http=i,this.modalService=s,this.service=r,this.toastr=l,this.spinner=d,this.route=f,this.allProjects=[],this.submit=!1,this.userRole="",this.projectList=[],this.employeeList=[],this.currentAssignmentId=null,this.isEditing=!1,this.assignedEmployeeIDs=[]}ngOnInit(){this.projectForm=this.fb.group({projectName:["",o.k0.required],SelectedEmployeeName:[,o.k0.required],employeeFirstName:["",o.k0.required],projectStartDate:["",o.k0.required],projectEndDate:["",o.k0.required]}),this.getAllProjects(),this.getAllAssignments(),this.editForm=this.fb.group({employeeId:["",o.k0.required],SelectedEmployeeName:[,o.k0.required],projectName:["",o.k0.required],projectStartDate:["",o.k0.required],projectEndDate:["",o.k0.required],status:["",o.k0.required]})}onEmployeeChange(t){console.log("Selected Employee:",t),this.projectForm.patchValue({SelectedEmployeeName:this.projectForm.value.employeeFirstName.employeeFirstName})}get f(){return this.projectForm.controls}Save(){if(this.projectForm.invalid)return this.submit=!0,void this.projectForm.markAllAsTouched();let t,i;console.log("this.projectForm.value.employeeFirstName",this.projectForm.value.employeeFirstName),this.projectForm.value.employeeFirstName&&"object"==typeof this.projectForm.value.employeeFirstName&&"employeeID"in this.projectForm.value.employeeFirstName?(t=this.projectForm.value.employeeFirstName.employeeFirstName,i=this.projectForm.value.employeeFirstName.employeeID):t=this.projectForm.value.employeeFirstName;let r={projectName:this.projectForm.value.projectName.projectName,employeeName:t,employeeID:i,projectStartDate:this.projectForm.value.projectStartDate,projectEndDate:this.projectForm.value.projectEndDate,status:"pending"};this.spinner.show(),this.service.SaveAssignment(r).subscribe(l=>{this.spinner.hide(),200===l.status&&!1===l.isExit?(this.getAllAssignments(),this.projectForm.reset(),p().fire({text:l.message,icon:"success",confirmButtonText:"OK"})):p().fire({text:l.message,icon:"error",confirmButtonText:"OK"})},l=>{this.spinner.hide(),console.error("Save error:",l),this.toastr.error(l.message||"An error occurred while saving the assignment.")})}editprojectAssignment(t){this.currentAssignmentId=t.assignmentUniqueId,console.log("assignment",t),this.editForm.patchValue({projectName:t.projectName,employeeId:t.employeeID,projectStartDate:t.projectStartDate,projectEndDate:t.projectEndDate,SelectedEmployeeName:t.employeeName,status:t.status}),this.modalService.open(this.editprojectAssignmentTemplate,{centered:!0,backdrop:"static",size:"lg"}),this.isEditing=!0,this.submit=!1}UpdateAssignments(){if(this.submitted=!0,this.editForm.invalid)return;let i={assignmentUniqueId:this.currentAssignmentId,projectName:this.editForm.value.projectName.projectName,employeeID:this.editForm.value.employeeId,projectStartDate:this.editForm.value.projectStartDate,projectEndDate:this.editForm.value.projectEndDate,employeeName:this.editForm.value.SelectedEmployeeName,status:this.editForm.value.status};this.spinner.show(),this.service.UpdateAssignments(i).subscribe({next:s=>{this.spinner.hide(),200===s.status?(this.getAllAssignments(),this.modalService.dismissAll(),p().fire({text:s.message,icon:"success",confirmButtonText:"OK"})):this.toastr.error(s.message||"Failed to update assignment")},error:s=>{this.spinner.hide(),this.toastr.error(s.error?.message||"Error updating assignment")}})}getAllAssignments(){this.spinner.show(),this.service.getAllAssignments().subscribe(t=>{this.allAssignment=t.data||[],this.assignedEmployeeIDs=this.allAssignment.map(i=>i.employeeID),this.spinner.hide(),this.getAllEmployeeLists()},t=>{this.spinner.hide(),console.log("Assignment error",t)})}getAllProjects(){this.spinner.show(),this.service.getAllProjects().subscribe(t=>{console.log("res.data",t.data),this.allProjects=t.data,console.log("this.allProjects",this.allProjects),this.spinner.hide()},t=>{console.error("Error fetching projects:",t),this.spinner.hide()})}getAllEmployeeLists(){this.spinner.show(),this.service.getAllEmployeeLists().subscribe(t=>{this.EmployeeList=t.data||[],console.log("this.assignedEmployeeIDs",this.assignedEmployeeIDs),this.spinner.hide(),console.log("Filtered EmployeeList",this.EmployeeList)},t=>{this.spinner.hide(),console.log("Employee list error",t)})}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(o.ok),e.rXU(b.Qq),e.rXU(g.Bq),e.rXU(F.t),e.rXU(k.tw),e.rXU(u.ex),e.rXU(j.nX))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-management-project-assignment"]],viewQuery:function(i,s){if(1&i&&e.GBs(_,5),2&i){let r;e.mGM(r=e.lsd())&&(s.editprojectAssignmentTemplate=r.first)}},standalone:!0,features:[e.aNF],decls:73,vars:13,consts:[["editprojectAssignmentTemplate",""],[1,"card"],[1,"card-header","text-center"],[1,"card-body"],[3,"formGroup"],[1,"row"],[1,"col-lg-4"],[1,"form-group"],[1,"text-danger"],["bindLabel","employeeID","placeholder","Select Employee","aria-placeholder","Employee Id","formControlName","employeeFirstName",3,"change","items","multiple","searchable"],["class","text-danger",4,"ngIf"],["type","text","placeholder","Employee Name","formControlName","SelectedEmployeeName","readonly","",1,"form-control"],["aria-placeholder","Project Name","bindLabel","projectName","placeholder","Select Project","formControlName","projectName",3,"items","multiple","searchable"],["type","date","formControlName","projectStartDate",1,"form-control"],["type","date","formControlName","projectEndDate",1,"form-control"],[1,"col-lg-4","mt-4","textRight"],["type","button",1,"btn","btn-success",3,"click"],[1,"table-responsive","tableFixHead","mt-4"],[1,"table","table-bordered","text-center"],[4,"ngFor","ngForOf"],[3,"ngClass"],[1,"text-center"],[1,"edit-btn","bx","bx-edit-alt",3,"click","ngClass"],[1,"modal-header",2,"justify-content","space-between"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["type","text","formControlName","employeeId","readonly","",1,"form-control"],["type","text","formControlName","SelectedEmployeeName","readonly","",1,"form-control"],["bindLabel","projectName","placeholder","Select Project","formControlName","projectName",3,"items","multiple","searchable"],["formControlName","status",1,"form-select"],["value","completed"],["value","pending"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(i,s){if(1&i){const r=e.RV6();e.j41(0,"div",1)(1,"div",2),e.EFF(2," Project Assignment "),e.k0s(),e.j41(3,"div",3)(4,"form",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"label"),e.EFF(9,"Employee Id"),e.j41(10,"span",8),e.EFF(11,"*"),e.k0s()(),e.j41(12,"ng-select",9),e.bIt("change",function(d){return e.eBV(r),e.Njj(s.onEmployeeChange(d))}),e.k0s()(),e.DNE(13,C,2,0,"div",10),e.k0s(),e.j41(14,"div",6)(15,"div",7)(16,"label"),e.EFF(17,"Employee Name"),e.j41(18,"span",8),e.EFF(19,"*"),e.k0s()(),e.nrm(20,"input",11),e.k0s(),e.DNE(21,D,2,0,"div",10),e.k0s(),e.j41(22,"div",6)(23,"div",7)(24,"label"),e.EFF(25,"Project Name"),e.j41(26,"span",8),e.EFF(27,"*"),e.k0s()(),e.nrm(28,"ng-select",12),e.k0s(),e.DNE(29,A,2,0,"div",10),e.k0s(),e.j41(30,"div",6)(31,"div",7)(32,"label"),e.EFF(33,"Project Start Date"),e.j41(34,"span",8),e.EFF(35,"*"),e.k0s()(),e.nrm(36,"input",13),e.k0s(),e.DNE(37,T,2,0,"div",10),e.k0s(),e.j41(38,"div",6)(39,"div",7)(40,"label"),e.EFF(41,"Project End Date"),e.j41(42,"span",8),e.EFF(43,"*"),e.k0s()(),e.nrm(44,"input",14),e.k0s(),e.DNE(45,I,2,0,"div",10),e.k0s(),e.j41(46,"div",15)(47,"button",16),e.bIt("click",function(){return e.eBV(r),e.Njj(s.Save())}),e.EFF(48,"Save"),e.k0s()()()(),e.j41(49,"div",17)(50,"table",18)(51,"thead")(52,"tr")(53,"th"),e.EFF(54,"Assignment Id"),e.k0s(),e.j41(55,"th"),e.EFF(56,"Employee Id"),e.k0s(),e.j41(57,"th"),e.EFF(58,"Employee Name"),e.k0s(),e.j41(59,"th"),e.EFF(60,"Project"),e.k0s(),e.j41(61,"th"),e.EFF(62,"Project Start Date"),e.k0s(),e.j41(63,"th"),e.EFF(64,"Project End Date"),e.k0s(),e.j41(65,"th"),e.EFF(66,"Status"),e.k0s(),e.j41(67,"th"),e.EFF(68,"Action"),e.k0s()()(),e.j41(69,"tbody"),e.DNE(70,P,20,20,"tr",19),e.k0s()()()()(),e.DNE(71,S,60,4,"ng-template",null,0,e.C5r)}2&i&&(e.R7$(4),e.Y8G("formGroup",s.projectForm),e.R7$(8),e.Y8G("items",s.EmployeeList)("multiple",!1)("searchable",!0),e.R7$(),e.Y8G("ngIf",s.submit&&s.f.employeeFirstName.errors),e.R7$(8),e.Y8G("ngIf",s.submit&&s.f.SelectedEmployeeName.errors),e.R7$(7),e.Y8G("items",s.allProjects)("multiple",!1)("searchable",!0),e.R7$(),e.Y8G("ngIf",s.submit&&s.f.projectName.errors),e.R7$(8),e.Y8G("ngIf",s.submit&&s.f.projectStartDate.errors),e.R7$(8),e.Y8G("ngIf",s.submit&&s.f.projectEndDate.errors),e.R7$(25),e.Y8G("ngForOf",s.allAssignment))},dependencies:[m.MD,m.YU,m.Sq,m.bT,m.vh,o.X1,o.qT,o.xH,o.y7,o.me,o.wz,o.BC,o.cb,o.j4,o.JD,o.YN,u.PO,h.MQ,h.vr],styles:[".modal-header[_ngcontent-ng-c3406347071][_ngcontent-%COMP%]{display:flex;justify-content:space-between}.completed[_ngcontent-%COMP%]{color:#059633!important;font-weight:700!important;font-size:14px}.pending[_ngcontent-%COMP%]{color:orange!important;font-weight:700!important;font-size:14px}"]})}return n})()},{path:"ManagementProjectCreation",component:(()=>{class n{constructor(t,i,s,r,l,d,f){this.fb=t,this.http=i,this.modalService=s,this.service=r,this.toastr=l,this.spinner=d,this.route=f,this.allProjects=[],this.submit=!1,this.userRole="",this.costCenterList=[],this.statusOptions=[{value:"Active",label:"Active"},{value:"Inactive",label:"Inactive"}],this.currentProjectId=null,this.isEditing=!1}ngOnInit(){this.projectForm=this.fb.group({projectName:["",o.k0.required],costCenter:["",o.k0.required],status:["",o.k0.required]}),this.getAllProjects(),this.loginData=this.service.getLoginResponse()}get f(){return this.projectForm.controls}Save(){if(this.projectForm.invalid)return this.submit=!0,void this.projectForm.markAllAsTouched();const t={projectName:this.projectForm.value.projectName,costCenter:this.projectForm.value.costCenter,status:this.projectForm.value.status,loggedInUser:this.loginData.data?.employeeID,createdDate:""};this.spinner.show(),this.service.SaveProjects(t).subscribe(i=>{this.spinner.hide(),200===i.status?(this.getAllProjects(),this.projectForm.reset(),p().fire({text:i.message,icon:"success",confirmButtonText:"OK"})):this.toastr.error(i.message||"Failed to save project.")},i=>{this.spinner.hide(),console.error("Error saving project:",i),this.toastr.error("An error occurred while saving the project.")})}editProject(t){this.currentProjectId=t.projectUniqueId,this.projectForm.patchValue({projectName:t.projectName,costCenter:t.costCenter,status:t.status}),this.modalService.open(this.editProjectTemplate,{centered:!0,backdrop:"static",size:"lg"}),this.isEditing=!0,this.submit=!1}updateProject(){if(this.submitted=!0,this.projectForm.invalid)return;const i=(new Date).toLocaleString("en-GB",{timeZone:"Asia/Kolkata",day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1}),s={projectUniqueId:this.currentProjectId,projectName:this.projectForm.value.projectName,costCenter:this.projectForm.value.costCenter,status:this.projectForm.value.status,loggedInUser:this.loginData.data?.employeeID,createdDate:i};this.spinner.show(),this.service.UpdateProjects(s).subscribe({next:r=>{this.spinner.hide(),200===r.status?(this.getAllProjects(),this.modalService.dismissAll(),p().fire({text:r.message,icon:"success",confirmButtonText:"OK"})):this.toastr.error(r.message||"Failed to update project")},error:r=>{this.spinner.hide(),this.toastr.error(r.error?.message||"Error updating project")}})}delete(t){p().fire({title:"Are you sure?",text:"Do you want to delete this project?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",timer:1e4}).then(i=>{if(i.isConfirmed){this.projectUniqueId=t.projectUniqueId;const s={globalId:this.projectUniqueId,screenName:"project"};this.spinner.show(),this.service.deteleGlobal(s).subscribe(r=>{this.spinner.hide(),200===r.status?(this.getAllProjects(),p().fire({title:"Success",text:r.message,icon:"success",confirmButtonText:"OK",timer:5e3}).then(()=>{this.modalService.dismissAll()})):this.toastr.error(r.message)},r=>{this.spinner.hide(),console.error("Error deleting project:",r),this.toastr.error("Failed to delete project")})}})}getAllProjects(){this.spinner.show(),this.service.getAllProjects().subscribe(t=>{this.allProjects=t.data,this.spinner.hide()},t=>{console.error("Error fetching projects:",t),this.spinner.hide()})}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(o.ok),e.rXU(b.Qq),e.rXU(g.Bq),e.rXU(F.t),e.rXU(k.tw),e.rXU(u.ex),e.rXU(j.nX))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-management-project-creation"]],viewQuery:function(i,s){if(1&i&&e.GBs(R,5),2&i){let r;e.mGM(r=e.lsd())&&(s.editProjectTemplate=r.first)}},standalone:!0,features:[e.aNF],decls:52,vars:7,consts:[["editProjectTemplate",""],[1,"card"],[1,"card-header","text-center"],[1,"card-body"],[3,"formGroup"],[1,"row"],[1,"col-lg-4"],[1,"form-group"],[1,"text-danger"],["type","text","formControlName","projectName","placeholder","Enter Project Name",1,"form-control"],["class","text-danger",4,"ngIf"],["type","text","formControlName","costCenter","placeholder","Enter Cost Center",1,"form-control"],["bindLabel","label","bindValue","value","placeholder","Select Status","formControlName","status",3,"items","multiple"],[1,"col-lg-12","mt-4","textRight"],["type","button",1,"btn","btn-success",3,"click"],[1,"table-responsive","tableFixHead","mt-4"],[1,"table","table-bordered"],[4,"ngFor","ngForOf"],[1,"text-center"],[1,"edit-btn","bx","bx-edit-alt",3,"click"],[1,"delete-btn","bx","bx-trash",3,"click"],[1,"modal-header",2,"justify-content","space-between"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(i,s){if(1&i){const r=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"h5"),e.EFF(3,"Project Management"),e.k0s()(),e.j41(4,"div",3)(5,"form",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"label"),e.EFF(10,"Project Name"),e.j41(11,"span",8),e.EFF(12,"*"),e.k0s()(),e.nrm(13,"input",9),e.k0s(),e.DNE(14,x,2,0,"div",10),e.k0s(),e.j41(15,"div",6)(16,"div",7)(17,"label"),e.EFF(18,"Cost Center"),e.j41(19,"span",8),e.EFF(20,"*"),e.k0s()(),e.nrm(21,"input",11),e.k0s(),e.DNE(22,G,2,0,"div",10),e.k0s(),e.j41(23,"div",6)(24,"div",7)(25,"label"),e.EFF(26,"Status"),e.j41(27,"span",8),e.EFF(28,"*"),e.k0s()(),e.nrm(29,"ng-select",12),e.k0s(),e.DNE(30,$,2,0,"div",10),e.k0s(),e.j41(31,"div",13)(32,"button",14),e.bIt("click",function(){return e.eBV(r),e.Njj(s.Save())}),e.EFF(33,"Save"),e.k0s()()()(),e.j41(34,"div",15)(35,"table",16)(36,"thead")(37,"tr")(38,"th"),e.EFF(39,"Project Id"),e.k0s(),e.j41(40,"th"),e.EFF(41,"Project Name"),e.k0s(),e.j41(42,"th"),e.EFF(43,"Cost Center"),e.k0s(),e.j41(44,"th"),e.EFF(45,"Status"),e.k0s(),e.j41(46,"th"),e.EFF(47,"Action"),e.k0s()()(),e.j41(48,"tbody"),e.DNE(49,B,12,4,"tr",17),e.k0s()()()()(),e.DNE(50,U,35,3,"ng-template",null,0,e.C5r)}2&i&&(e.R7$(5),e.Y8G("formGroup",s.projectForm),e.R7$(9),e.Y8G("ngIf",s.submit&&s.f.projectName.errors),e.R7$(8),e.Y8G("ngIf",s.submit&&s.f.costCenter.errors),e.R7$(7),e.Y8G("items",s.statusOptions)("multiple",!1),e.R7$(),e.Y8G("ngIf",s.submit&&s.f.status.errors),e.R7$(19),e.Y8G("ngForOf",s.allProjects))},dependencies:[m.MD,m.Sq,m.bT,o.X1,o.qT,o.me,o.BC,o.cb,o.j4,o.JD,o.YN,u.PO,h.MQ,h.vr],styles:[".modal-header[_ngcontent-ng-c3406347071][_ngcontent-%COMP%]{display:flex;justify-content:space-between}"]})}return n})()},{path:"ManagementTaskAssignment",component:(()=>{class n{constructor(t,i,s,r,l){this.fb=t,this.toastr=i,this.service=s,this.spinner=r,this.modalService=l,this.taskAssignmentId=null,this.allProjects=[],this.EmployeeList=[],this.taskAssignments=[],this.taskassignedEmployeeIDs=[],this.submit=!1,this.isEditing=!1,this.selectedTask=null,this.filteredProjects=[]}ngOnInit(){this.loginData=this.service.getLoginResponse(),console.log("this.loginData",this.loginData),this.taskForm=this.fb.group({SelectedProjectName:["",o.k0.required],employeeID:["",o.k0.required],description:["",o.k0.required],status:[""],TaskDate:["",o.k0.required]}),this.getAllEmployeeLists(),this.getAlltaskAssignments(),this.getAllAssignments(),this.edittaskForm=this.fb.group({SelectedProjectName:["",o.k0.required],employeeID:["",o.k0.required],description:["",o.k0.required],status:[""],TaskDate:["",o.k0.required]})}onEmployeeSelect(t){this.allProjects=[],console.log("Selected Employee:",t),this.taskForm.patchValue({SelectedProjectName:this.taskForm.value.selectedEmployee?.projectName||""}),this.allProjects=this.allAssignment.filter(i=>i.employeeID===t.employeeID),console.log("allProjects",this.allProjects)}get f(){return this.taskForm.controls}getAllProjects(){this.spinner.show(),this.service.getAllProjects().subscribe(t=>{this.allProjects=t.data,this.spinner.hide()},t=>{console.error("Error fetching projects:",t),this.spinner.hide()})}getAllEmployeeLists(){this.EmployeeList=[],this.spinner.show(),this.service.getAllEmployeeLists().subscribe(t=>{this.EmployeeList=t.data,this.spinner.hide()},t=>{this.spinner.hide(),console.log("error",t)})}getAllAssignments(){this.spinner.show(),this.service.getAllAssignments().subscribe(t=>{this.allAssignment=t.data||[],console.log("allAssignment",this.allAssignment)},t=>{this.spinner.hide(),console.log("Assignment error",t)})}saveTask(){if(this.submit=!0,this.taskForm.invalid)return;let t,i;console.log("this.taskForm.value.employeeID",this.taskForm.value.employeeID),t=this.taskForm.value.employeeID&&"object"==typeof this.taskForm.value.employeeID&&"employeeID"in this.taskForm.value.employeeID?this.taskForm.value.employeeID.employeeID:this.taskForm.value.employeeID,console.log("this.taskForm.value.projectName",this.taskForm.value.SelectedProjectName),i=this.taskForm.value.SelectedProjectName&&"object"==typeof this.taskForm.value.SelectedProjectName&&"projectName"in this.taskForm.value.SelectedProjectName?this.taskForm.value.SelectedProjectName.projectName:this.taskForm.value.SelectedProjectName;let s={projectName:i,employeeID:t,description:this.taskForm.value.description,status:this.taskForm.value.status,TaskDate:this.taskForm.value.TaskDate,assignedBy:this.loginData.data?.employeeID};this.spinner.show(),this.service.SaveTaskAssignment(s).subscribe(r=>{this.spinner.hide(),200===r.status?(this.submit=!1,this.getAlltaskAssignments(),this.taskForm.reset(),p().fire({text:r.message,icon:"success",confirmButtonText:"OK"})):p().fire({text:r.message,icon:"error",confirmButtonText:"OK"})},r=>{this.spinner.hide(),console.error("Save error:",r),this.toastr.error(r.message||"An error occurred while saving the assignment.")})}editTask(t,i){this.taskAssignmentUniqueId=t.taskassignmentUniqueId,this.selectedTask=t,this.edittaskForm.patchValue({SelectedProjectName:t.projectName,employeeID:t.employeeID,description:t.description,TaskDate:t.TaskDate,status:t.status}),this.modalService.open(this.edittaskTemplate,{centered:!0,backdrop:"static",size:"lg"}),this.isEditing=!0,this.submit=!1}UpdateAssignments(){if(this.submitted=!0,this.edittaskForm.invalid)return;let i={taskassignmentUniqueId:this.taskAssignmentUniqueId,projectName:this.edittaskForm.value.SelectedProjectName,employeeID:this.edittaskForm.value.employeeID,description:this.edittaskForm.value.description,TaskDate:this.edittaskForm.value.TaskDate,status:this.edittaskForm.value.status};this.spinner.show(),this.service.UpdateTaskAssignments(i).subscribe({next:s=>{this.spinner.hide(),200===s.status?(this.getAlltaskAssignments(),this.modalService.dismissAll(),p().fire({text:s.message,icon:"success",confirmButtonText:"OK"})):this.toastr.error(s.message||"Failed to update assignment")},error:s=>{this.spinner.hide(),this.toastr.error(s.error?.message||"Error updating assignment")}})}getAlltaskAssignments(){this.spinner.show(),this.service.getAllTaskAssignments().subscribe(t=>{this.taskAssignments=t.data||[],console.log("this.taskAssignments",this.taskAssignments),this.taskassignedEmployeeIDs=this.taskAssignments.map(i=>i.employeeID),this.spinner.hide()},t=>{this.spinner.hide(),console.log("Assignment error",t)})}deleteTask(t){console.log("obj",t);var i=t;p().fire({title:"Are you sure?",text:"Do you want to delete this project?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",timer:1e4}).then(s=>{if(s.isConfirmed){const r={globalId:i.taskassignmentUniqueId,screenName:"taskassignment"};this.spinner.show(),this.service.deteleGlobal(r).subscribe(l=>{this.spinner.hide(),200===l.status?(this.getAlltaskAssignments(),p().fire({title:"Success",text:l.message,icon:"success",confirmButtonText:"OK",timer:5e3}).then(()=>{this.modalService.dismissAll()})):this.toastr.error(l.message)},l=>{this.spinner.hide(),console.error("Error deleting project:",l),this.toastr.error("Failed to delete project")})}})}resetForm(){this.taskForm.reset(),this.selectedTask=null,this.submit=!1}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(o.ok),e.rXU(k.tw),e.rXU(F.t),e.rXU(u.ex),e.rXU(g.Bq))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-management-task-assignment"]],viewQuery:function(i,s){if(1&i&&e.GBs(w,5),2&i){let r;e.mGM(r=e.lsd())&&(s.edittaskTemplate=r.first)}},standalone:!0,features:[e.aNF],decls:57,vars:10,consts:[["edittaskTemplate",""],[1,"card"],[1,"card-header","text-center"],[1,"card-body"],[3,"formGroup"],[1,"row"],[1,"col-md-4"],[1,"form-group"],[1,"text-danger"],["bindLabel","employeeID","placeholder","Select Employee","formControlName","employeeID",3,"change","items"],["class","text-danger",4,"ngIf"],["bindLabel","projectName","placeholder","Select Project","formControlName","SelectedProjectName",3,"items","multiple","searchable"],["type","text","formControlName","description","placeholder","Enter description",1,"form-control"],["type","date","formControlName","TaskDate",1,"form-control"],["formControlName","status",1,"form-control"],["value",""],["value","Open"],["value","Close"],[1,"col-lg-4","mt-4",2,"text-align","right"],["type","submit",1,"btn","btn-success","btn-sm","mt-3",3,"click"],["class","mt-4",4,"ngIf"],[1,"mt-4"],[1,"table","table-bordered","text-center"],[4,"ngFor","ngForOf"],[1,"edit-btn","bx","bx-edit-alt",3,"click"],[1,"delete-btn","bx","bx-trash",3,"click"],[1,"modal-header",2,"justify-content","space-between"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["type","text","formControlName","employeeID","placeholder","Select Employee",1,"form-control"],[1,"col-md-6"],["type","text","formControlName","SelectedProjectName","placeholder","Select Project",1,"form-control"],[1,"modal-footer"],["type","button",1,"btn","btn-update",3,"click"],["type","button",1,"btn","btn-cancel",3,"click"]],template:function(i,s){if(1&i){const r=e.RV6();e.j41(0,"div",1)(1,"div",2),e.EFF(2," Task Assignment "),e.k0s(),e.j41(3,"div",3)(4,"form",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"label"),e.EFF(9,"Employee ID"),e.j41(10,"span",8),e.EFF(11,"*"),e.k0s()(),e.j41(12,"ng-select",9),e.bIt("change",function(d){return e.eBV(r),e.Njj(s.onEmployeeSelect(d))}),e.k0s(),e.DNE(13,Y,2,0,"div",10),e.k0s()(),e.j41(14,"div",6)(15,"div",7)(16,"label"),e.EFF(17,"Project Name"),e.j41(18,"span",8),e.EFF(19,"*"),e.k0s()(),e.nrm(20,"ng-select",11),e.k0s()(),e.j41(21,"div",6)(22,"div",7)(23,"label"),e.EFF(24,"Description"),e.j41(25,"span",8),e.EFF(26,"*"),e.k0s()(),e.nrm(27,"input",12),e.DNE(28,V,2,0,"div",10),e.k0s()(),e.j41(29,"div",6)(30,"div",7)(31,"label"),e.EFF(32,"Task Date"),e.j41(33,"span",8),e.EFF(34,"*"),e.k0s()(),e.nrm(35,"input",13),e.DNE(36,X,2,0,"div",10),e.k0s()(),e.j41(37,"div",6)(38,"div",7)(39,"label"),e.EFF(40,"Status"),e.j41(41,"span",8),e.EFF(42,"*"),e.k0s()(),e.j41(43,"select",14)(44,"option",15),e.EFF(45,"Select Status"),e.k0s(),e.j41(46,"option",16),e.EFF(47,"Open"),e.k0s(),e.j41(48,"option",17),e.EFF(49,"Close"),e.k0s()(),e.DNE(50,O,2,0,"div",10),e.k0s()(),e.j41(51,"div",18)(52,"button",19),e.bIt("click",function(){return e.eBV(r),e.Njj(s.saveTask())}),e.EFF(53,"Save"),e.k0s()()()(),e.DNE(54,J,18,1,"div",20),e.k0s()(),e.DNE(55,Z,59,5,"ng-template",null,0,e.C5r)}2&i&&(e.R7$(4),e.Y8G("formGroup",s.taskForm),e.R7$(8),e.Y8G("items",s.EmployeeList),e.R7$(),e.Y8G("ngIf",s.submit&&s.f.employeeID.errors),e.R7$(7),e.Y8G("items",s.allProjects)("multiple",!1)("searchable",!0),e.R7$(8),e.Y8G("ngIf",s.submit&&s.f.description.errors),e.R7$(8),e.Y8G("ngIf",s.submit&&(null==s.f.TaskDate?null:s.f.TaskDate.errors)),e.R7$(14),e.Y8G("ngIf",s.submit&&s.f.status.errors),e.R7$(4),e.Y8G("ngIf",s.taskAssignments&&s.taskAssignments.length>0))},dependencies:[m.MD,m.Sq,m.bT,o.X1,o.qT,o.xH,o.y7,o.me,o.wz,o.BC,o.cb,o.j4,o.JD,o.YN,u.PO,h.MQ,h.vr],styles:[".btn-update[_ngcontent-%COMP%]{background-color:green;color:#fff}.btn-cancel[_ngcontent-%COMP%]{background-color:red;color:#fff}"]})}return n})()},{path:"ManangementEmployeeCalendar",component:(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-manangement-employee-calendar"]],decls:2,vars:0,template:function(i,s){1&i&&(e.j41(0,"p"),e.EFF(1,"manangement-employee-calendar works!"),e.k0s())},styles:[".fc-event-title{white-space:pre-line!important;font-size:12px!important;padding:4px!important}"]})}return n})()}];let ee=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=e.$C({type:n});static#s=this.\u0275inj=e.G2t({imports:[j.iI.forChild(W),j.iI]})}return n})(),te=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=e.$C({type:n});static#s=this.\u0275inj=e.G2t({imports:[m.MD,o.YN,ee]})}return n})()}}]);