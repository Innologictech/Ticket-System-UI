<div class="dashboard-container">
  <div class="card">
    <div class="card">
      <div class="card-header">Ticket Dashboard</div>
    </div>

    <!-- Summary Cards -->
    <div class="summary-cards" *ngIf="!isSlide">
      <div class="card emp">
        <h3>Total Tickets</h3>
        <div class="value">{{ summaryStats.totalTickets }}</div>
      </div>
      <div class="card prj">
        <h3>Open Tickets</h3>
        <div class="value">{{ summaryStats.openTickets }}</div>
      </div>
      <div class="card sheet">
        <h3>In Progress</h3>
        <div class="value">{{ summaryStats.inProgressTickets }}</div>
      </div>
      <div class="card avgPrj">
        <h3>Closed Tickets</h3>
        <div class="value">{{ summaryStats.closedTickets }}</div>
      </div>
    </div>

    <!-- Carousel View (Optional Slide) -->
    <div class="carousel-container" *ngIf="isSlide">
      <div class="card1" *ngFor="let item of displayedItems"
           [@slideAnimation]
           [style.background-image]="'url(' + item.bgImage + ')'">
        <div class="card-content">
          <h3 class="labelName">{{ item.label }}</h3>
          <p class="labelCounts">{{ item.count }}</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Charts Section -->
  <div class="card">
    <div class="card-body">
      <div class="d-flex justify-content-end mb-3">
        <button class="btn btn-warning" (click)="resetView()">Reset</button>
      </div>

      <div class="row" id="barChart" style="border: 2px solid darkviolet !important; margin-right: 0px !important; margin-left: 0px !important;">
        <!-- Bar Chart -->
        <div class="col-md-6 col-lg-6" id="leftBar">
          <h2 style="text-align: center;">Yearly Ticket Status (Bar Chart)</h2>
          <apx-chart 
            [series]="barChartOptions.series" 
            [chart]="barChartOptions.chart"
            [xaxis]="barChartOptions.xaxis"
            [yaxis]="barChartOptions.yaxis"
            [plotOptions]="barChartOptions.plotOptions"
            [colors]="barChartOptions.colors">
          </apx-chart>
        </div>

        <!-- Pie Chart -->
        <div class="col-md-6 col-lg-6" id="rightBar" *ngIf="pieChartOptions.series?.length > 0">
          <h2 style="text-align: center;">Ticket Distribution - Current Year (Pie Chart)</h2>
          <apx-chart 
            [series]="pieChartOptions.series" 
            [chart]="pieChartOptions.chart"
            [labels]="pieChartOptions.labels"
            [colors]="pieChartOptions.colors">
          </apx-chart>
        </div>
      </div>
    </div>
  </div>

  <!-- Ticket Table Section -->
  <div class="card">
    <div class="card-body">
      <h2 class="text-center">Ticket Assignments</h2>
      <table class="table table-bordered">
        <thead class="thead-dark">
          <tr>
            <th>Assignment ID</th>
            <th>Project Name</th>
            <th>Employee Name</th>
            <th>Employee ID</th>
            <th>Project Start Date</th>
            <th>Project End Date</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of filteredAssignments">
            <td>{{ item.assignmentUniqueId }}</td>
            <td>
              <ng-container *ngFor="let project of item.projectName; let last = last">
                {{ project.projectName }}<span *ngIf="!last">, </span>
              </ng-container>
            </td>
            <td>{{ item.employeeName }}</td>
            <td>{{ item.employeeID }}</td>
            <td>{{ item.projectStartDate }}</td>
            <td>{{ item.projectEndDate }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
