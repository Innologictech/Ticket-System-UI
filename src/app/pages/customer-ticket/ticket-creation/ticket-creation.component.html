<div class="">
    <form>

        <div class="card">
            <div class="card-header">
                Ticket Creation
            </div>
            <div class="card-body">

                <div class="textRight">
                    <button type="button" class="btn btn-raised btn-md btnSubmitApproval"
                        (click)="newTicketCreation(createBugTicketTemplate)">
                        Create New Ticket
                    </button>
                </div>

                <div class="table-responsive tableFixHead">
                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th>Ticket No</th>
                                <th>Customer</th>
                                <th>First Name</th>
                                <th>Last Name</th>
                                <th>Email</th>
                                <th>Phone</th>
                                <th>Priority</th>
                                <th>Issue Type</th>
                                <th>Short Description</th>
                                <th>Reported Date</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let ticket of bugTicketList">
                                <td>{{ ticket.ticketNumber }}</td>
                                <td>{{ ticket.customerName }}</td>
                                <td>{{ ticket.firstName }}</td>
                                <td>{{ ticket.lastName }}</td>
                                <td>{{ ticket.email }}</td>
                                <td>{{ ticket.phone }}</td>
                                <td>{{ ticket.priority }}</td>
                                <td>{{ ticket.issueType }}</td>
                                <td>{{ ticket.shortDescription }}</td>
                                <td>{{ ticket.reportedDate | date: 'dd-MM-yyyy' }}</td>
                                <td class="text-center">
                                    <i class="fa fa-eye text-info me-2" (click)="viewTicket()"></i>
                                    <i class="fa fa-edit text-warning me-2"
                                        (click)="editTicket()"></i>
                                    <i class="fa fa-trash text-danger" (click)="deleteTicket()"></i>
                                </td>
                            </tr>
                        </tbody>

                    </table>

                </div>

            </div>

        </div>


    </form>

</div>
<ng-template #createBugTicketTemplate let-c="close">
    <div class="modal-header">
        Create New Bug Ticket
    </div>
    <div class="modal-body">
        <form [formGroup]="bugTicketForm" autocomplete="off">
            <div class="row">
                <!-- Ticket Number -->
                <div class="col-md-4">
                    <label>Ticket Number<span class="text-danger">*</span></label>
                    <input class="form-control" formControlName="ticketNumber" type="text"
                        placeholder="Auto-generated or manual" />
                </div>

                <!-- Customer Name -->
                <div class="col-md-4">
                    <label>Customer Name<span class="text-danger">*</span></label>
                    <input class="form-control" formControlName="customerName" type="text"
                        placeholder="Enter Customer Name" />
                </div>

                <!-- First Name -->
                <div class="col-md-4">
                    <label>First Name<span class="text-danger">*</span></label>
                    <input class="form-control" formControlName="firstName" type="text"
                        placeholder="Enter First Name" />
                </div>

                <!-- Last Name -->
                <div class="col-md-4">
                    <label>Last Name<span class="text-danger">*</span></label>
                    <input class="form-control" formControlName="lastName" type="text" placeholder="Enter Last Name" />
                </div>

                <!-- Email Address -->
                <div class="col-md-4">
                    <label>Email Address<span class="text-danger">*</span></label>
                    <input class="form-control" formControlName="email" type="email" placeholder="Enter Email" />
                </div>

                <!-- Phone Number -->
                <div class="col-md-4">
                    <label>Phone Number<span class="text-danger">*</span></label>
                    <input class="form-control" formControlName="phone" type="text" maxlength="10"
                        oninput="this.value = this.value.replace(/[^0-9]/g, '')" placeholder="Enter Phone Number" />
                </div>

                <!-- Reported Date -->
                <div class="col-md-4">
                    <label>Reported Date<span class="text-danger">*</span></label>
                    <input class="form-control" formControlName="reportedDate" type="date" />
                </div>

                <!-- Priority -->
                <div class="col-md-4">
                    <label>Priority<span class="text-danger">*</span></label>
                    <select class="form-control" formControlName="priority">
                        <option value="Low">Low</option>
                        <option value="Medium">Medium</option>
                        <option value="High">High</option>
                        <option value="Critical">Critical</option>
                    </select>
                </div>

                <!-- Issue Type -->
                <div class="col-md-4">
                    <label>Issue Type<span class="text-danger">*</span></label>
                    <select class="form-control" formControlName="issueType">
                        <option value="Functional Bug">Functional Bug</option>
                        <option value="Technical Bug">Technical Bug</option>
                        <option value="Enhancement Request">Enhancement Request</option>
                    </select>
                </div>

                <!-- Short Description -->
                <div class="col-md-12">
                    <label>Short Description<span class="text-danger">*</span></label>
                    <input class="form-control" formControlName="shortDescription" type="text"
                        placeholder="Enter Short Description" />
                </div>

                <!-- Detailed Description -->
                <div class="col-md-12">
                    <label>Detailed Description<span class="text-danger">*</span></label>
                    <textarea class="form-control" formControlName="detailedDescription" rows="4"
                        placeholder="Enter Detailed Description"></textarea>
                </div>

                <!-- Expected Result -->
                <div class="col-md-6">
                    <label>Expected Result</label>
                    <textarea class="form-control" formControlName="expectedResult" rows="2"
                        placeholder="What was expected?"></textarea>
                </div>

                <!-- Actual Result -->
                <div class="col-md-6">
                    <label>Actual Result</label>
                    <textarea class="form-control" formControlName="actualResult" rows="2"
                        placeholder="What actually happened?"></textarea>
                </div>

                <!-- Attachment / Screenshot -->
                <div class="col-md-12">
                    <label>Attachment / Screenshot</label>
                    <input class="form-control" type="file" (change)="onFileSelected($event)" />
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-primary" (click)="submitBugTicket()">Submit</button>
        <button type="button" class="btn btn-secondary" (click)="c('Close click')">Close</button>
    </div>
</ng-template>